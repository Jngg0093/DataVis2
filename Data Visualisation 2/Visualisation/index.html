<!DOCTYPE html>
<html lang="en">

<head>
    <title>Global reactions and preparadness towards the Russia-Ukraine War</title>

    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css" />

    <link rel="stylesheet" type="text/css" href="style.css" media="all">

    <!-- Google font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Allerta+Stencil&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
    
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v4.js"></script>

</head>

<body>
    <div class="page">

        <!-- pure grid group for title and subtitle-->
        <div class="pure-g">
            <div class="pure-u-1-1">
                <h1>Russia-Ukraine War</h1>
                <p>Russia's invasion of Ukraine on the 24th of February 2022 marked the biggest attack on a European country since WW2.
                    This further esclation in the Russo-Ukraine War provoked NATO (a military alliance between countries in Europe and North America), 
                    along with other allying countries to step in and provide support to Ukraine in many different ways.
                    This visualisation will explore the current balance of the Russo-Ukraine War, and the roles that external countries are playing
                    in the fight against Russia.
                    </p>
              </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group for first row -->
        <div class="pure-g">
            <div class = "pure-u-1-1">
                <div class="subtitle">
                    <h2>The State of War</h2>
                </div>
            </div>
        </div>

        <div class="pure-g">
            <div class="pure-u-1-1">
                <div id="map" class="vis-container"></div>
            </div>
        </div>
        <div class="pure-g">
            <div class="pure-u-1-2">
                <div class="description">
                    <p>Within the past decade, countries in Africa and the Middle East have shown the highest military spend as a proportion of GDP globally per year.
                       However, To fight against the Russian invasion, Ukraine had recorded highest military spend as a proportion of GDP in the whole world in 2022.
                    </p>
                </div>
            </div>
            <div class="pure-u-1-2">
                <div class="description">
                    <p>No country has even come close to this amount of spending in the past 10 years.
                       In stark contrast, Russia has had a very minor rise in military spending as a proportion of GDP from 2021 to 2022.
                       This is most likely a result of the massive disparity in country size (and GDP), with Ukraine the clear underdog in this war.
                    </p>
                </div>
            </div>
        </div>
        <!-- end pure grid group -->
    
       <!-- pure grid group for second row -->
       <div class="pure-g">
            <div class = "pure-u-1-1">
                <div class="subtitle">
                    <h2>Levelling the playing field</h2>
                </div>
            </div>
        </div>
        <div class="pure-g">
            <div class="pure-u-1-2">
                <p>Russia vs Ukraine 2022</p>
                <div id="radar" class="vis-container"></div>
            </div>
            <div class="pure-u-1-2">
                <div id="budgetcomparison" class="vis-container"></div>
            </div>
        </div>
        <div class="pure-g">
            <div class="pure-u-1-2">
                <div class="description">
                    <p>TThe massive disparity in the military might between Russia and Ukraine is clear in all aspects of the military, 
                        including spending, army size, land and air units, and artillery.
                        Whilst Russia is the overwhelmingly dominant force of the two, Ukraine have been able to hold their own with the help of their allying countries.
                        The military spending budget alone displays Ukraine reliance on external assistance to have any chance to match and surpass Russia.
                        Almost 65% of Ukraine's military spending to fight against Russia came from the support of allying countries.
                    </p>
                </div>
              </div>
            <div class="pure-u-1-2">
                <div id="my_dataviz" class="vis-container"></div>
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group for third row -->
        <div class="pure-g">
            <div class = "pure-u-1-1">
                <div class="subtitle">
                    <h2>External assistance</h2>
                </div>
            </div>
        </div>
        <div class="pure-g">
            <div class="pure-u-1-2">
                <div class="description">
                    <button id="OverviewButton">Overview</button>
                    <button id="AllianceButton">Alliance View</button>
                    <button id="PerCountryButton">Country View</button>
                </div>
                <div id="financialaid" class="vis-container"></div>
                <div id="natoaid" class="vis-container" style="display: none;"></div>
                <div id="natoaiddetailed" class="vis-container" style="display: none;"></div>
                <div class="description">
                    <p> The external aid to Ukraine came from countries all over the world, with the biggest benefactors including the United States,
                        the United Kingdom, Germany, and France. 
                        Received assistance was not limited to NATO countries, with several non-NATO showing their support as well countries.
                        Apart from financial aid, several countries, predominantly countries in Europe around Ukraine, also provided refugee programs to Ukranians impacted by the war. 
                        Surprisingly, Russia has recorded the most number of individuals granted refugee, followed by Germany and Poland.
                    </p>
                </div>
            </div>
            <div class="pure-u-1-2">
                <div id="refugee" class="vis-container"></div>
            </div>
        </div>
        <!-- end pure grid group -->
    
    </div>
</body>
    <script src="events.js"></script>
    <script type="text/javascript">
        var radarcomparison = "RussiavsUkraine.json";
        var financialaid = "support_alluvial.json";
        var spendingtime = "military_spending_over_time.json";
        var map1 = "military_spending_combined.json";
        var parallelcoordinate = "parallel_coordinated.json";
        var budgetcomparison = "budget_comparison.json";
        var natocompare = "NATOaid.json";
        var natocomparedetail = "NATOaidDetailed.json";
        var refugees = "refugees.json";
    
        vegaEmbed('#radar', radarcomparison, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#budgetcomparison', budgetcomparison, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#financialaid', financialaid, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#spend', spendingtime, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#map', map1, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#natoaid', natocompare, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#natoaiddetailed', natocomparedetail, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#refugee', refugees, { "actions": false }).then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

    
      </script>
    <script>

        // set the dimensions and margins of the graph
        var margin = {top: 10, right: 10, bottom: 10, left: 10},
          width = 600 - margin.left - margin.right,
          height = 200 - margin.top - margin.bottom;
        
        // append the svg object to the body of the page
        var svg = d3.select("#my_dataviz")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");
        
        // Read data
        d3.csv('https://raw.githubusercontent.com/Jngg0093/DataVis2/main/Data%20Visualisation%202/Data/army-alliance.csv', function(data) {
        
          // stratify the data: reformatting for d3.js
          var root = d3.stratify()
            .id(function(d) { return d.Alliance; })   // Name of the entity (column name is name in csv)
            .parentId(function(d) { return d.Parent; })   // Name of the parent (column name is parent in csv)
            (data);
          root.sum(function(d) { return +d.Total })   // Compute the numeric value for each entity
        
          // Then d3.treemap computes the position of each element of the hierarchy
          // The coordinates are added to the root object above
          d3.treemap()
            .size([width, height])
            .padding(4)
            (root)
        
        console.log(root.leaves())
          // use this information to add rectangles:
          svg
            .selectAll("rect")
            .data(root.leaves())
            .enter()
            .append("rect")
              .attr('x', function (d) { return d.x0; })
              .attr('y', function (d) { return d.y0; })
              .attr('width', function (d) { return d.x1 - d.x0; })
              .attr('height', function (d) { return d.y1 - d.y0; })
              .style("stroke", "black")
              .style("fill", "#69b3a2");
        
          // and to add the text labels
          svg
            .selectAll("text")
            .data(root.leaves())
            .enter()
            .append("text")
              .attr("x", function(d){ return d.x0+10})    // +10 to adjust position (more right)
              .attr("y", function(d){ return d.y0+20})    // +20 to adjust position (lower)
              .text(function(d){ return d.data.Alliance})
              .attr("font-family: 'Roboto', sans-serif")
              .attr("font-size", "15px")
              .attr("fill", "white")
        })
        </script>
</html>