{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title":"Aid to Ukraine since the start of the Russia-Ukraine War",
  "height": 500,
  "width":500,
  
  "params":[
    {
    "name": "Grouping",
    "value": "All",
    "bind": {
      "input": "select",
      "options": ["All","Australia", "Austria", "Belgium", "Bulgaria", "Canada", "Croatia", "Cyprus", "Czech Republic", "Denmark", "Estonia", "Finland", "France", "Germany", "Greece", "Hungary", "Iceland", "Ireland", "Italy", "Japan", "Latvia", "Lithuania", "Luxembourg", "Malta", "Netherlands", "New Zealand", "Norway", "Poland", "Portugal", "South Korea", "Romania", "Slovakia", "Slovenia", "Spain", "Sweden", "Switzerland", "Turkey", "United Kingdom", "United States", "Taiwan"],
      "name": "Country: "
    }
  }
  ],
  "data": {
      "url": "https://raw.githubusercontent.com/Jngg0093/DataVis2/main/Data%20Visualisation%202/Data/stacked_bar.csv",
      "format": {"type": "csv"}
    },
    "transform": [{"fold": ["Financial commitments",
    "Humanitarian commitments",
    "Military commitments",
    "Share in total EU commitments"]},
    {"filter": "Grouping != 'All' ? datum.Country == Grouping : datum.Country"}
  ],
    "layer":[
    {"mark": "bar",
    "encoding": {
      "x": {"aggregate": "sum", "field": "value"},
      "y": {"field": "Country", "type":"nominal","sort":"-x"},
      "color": {"field": "key"},
      "tooltip":[
      {"field":"Country", "type":"nominal"},
      {"field":"Alliance", "type": "nominal"},
      {"field":"value", "type":"quantitative", "title":"Financial Support (US$ billion)"}
      ]
      }}
      ]
}